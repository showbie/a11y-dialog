/*! a11y-dialog 7.3.0 — © Kitty Giraudel */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).A11yDialog=e()}(this,(function(){"use strict";var t=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function e(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function i(t,e,i=!1){return n=o(e||document,t,i),Array.prototype.slice.call(n);var n}function n(t){(t.querySelector("[autofocus]")||t).focus()}function o(t,e,i=!1){if(!i)return t.querySelectorAll(e);var n=new Set,o=new Set,s=t=>{let e=(t=>t.shadowRoot?Array.from(t.shadowRoot.children):Array.from(t.children))(t);e.length>0?e.forEach((t=>s(t))):n.add("SLOT"===t.tagName?t.assignedNodes()?.[0]:t.parentNode)};return s(t),n.forEach((t=>{t.querySelectorAll(e).forEach((t=>{o.add(t)}))})),[...o]}function s(t,e,i){let n,o=e,s=!1;for(;!s&&o&&"BODY"!==o.tagName;)n="SLOT"===o.tagName,!n&&o.matches(i)&&(s=!0),o=o.host&&!o.parentNode?o.host:o.getAttribute("slot")?t.querySelector(`slot[name="${o.getAttribute("slot")}"]`):o.parentNode?o.parentNode:null;return s}function r(t=document){const e=t.activeElement;return e?e.shadowRoot?r(e.shadowRoot):e:null}function h(){i("[data-a11y-dialog]").forEach((function(t){new e(t)}))}return e.prototype.create=function(){return this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=i('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this)),this._closers=i("[data-a11y-dialog-hide]",this.$el).concat(i('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},e.prototype.show=function(t){return this.shown||(this._previouslyFocused=r(),this.$el.removeAttribute("aria-hidden"),this.shown=!0,n(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t)),this},e.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this},e.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},e.prototype.on=function(t,e){return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this},e.prototype.off=function(t,e){var i=(this._listeners[t]||[]).indexOf(e);return i>-1&&this._listeners[t].splice(i,1),this},e.prototype._fire=function(t,e){var i=this._listeners[t]||[],n=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(n),i.forEach(function(t){t(this.$el,e)}.bind(this))},e.prototype._bindKeypress=function(e){(function(t){let e=t,i=r(),n=!1;for(;!n&&i&&"BODY"!==i.tagName;)i===t&&(n=!0),i=i.getAttribute("slot")?o(e,`slot[name="${i.getAttribute("slot")}"]`)?.[0]:i.host&&!i.parentNode?i.host:i.parentNode?i.parentNode:null;return n})(this.$el)&&(this.shown&&27===e.which&&"alertdialog"!==this.$el.getAttribute("role")&&(e.preventDefault(),this.hide(e)),this.shown&&9===e.which&&function(e,n){var o=function(e){return i(t.join(","),e,!0).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))}(e),s=o.indexOf(r());n.shiftKey&&0===s?(o[o.length-1].focus(),n.preventDefault()):n.shiftKey||s!==o.length-1||(o[0].focus(),n.preventDefault())}(this.$el,e))},e.prototype._maintainFocus=function(t){let e=r();!this.shown||s(this.$el,e,'[aria-modal="true"]')||s(this.$el,e,"[data-a11y-dialog-ignore-focus-trap]")||n(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)),e}));
